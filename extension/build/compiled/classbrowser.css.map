{
  "version": 3,
  "file": "classbrowser.css",
  "sources": [
    "ClassBrowser.svelte"
  ],
  "sourcesContent": [
    "<script lang=\"ts\">var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nlet autoSearch;\r\nimport { onMount } from \"svelte\";\r\n;\r\nconst TypeOptions = [\r\n    {\r\n        value: \"data\",\r\n        label: \"Data (Class/Interface/Struct/Enum)\"\r\n    },\r\n    {\r\n        value: \"process\",\r\n        label: \"Process (Function)\"\r\n    },\r\n    {\r\n        value: \"container\",\r\n        label: \"Container (Namespace/Package/Module)\"\r\n    }\r\n];\r\nlet searchResults = [];\r\nlet searchType = \"data\";\r\nlet searchQuery = \"\";\r\nlet showMoreButton;\r\nlet showMoreFlag = true;\r\nonMount(() => __awaiter(void 0, void 0, void 0, function* () {\r\n    // this is used to recieve message from sidebar provider\r\n    window.addEventListener(\"message\", (event) => __awaiter(void 0, void 0, void 0, function* () {\r\n        const message = event.data;\r\n        switch (message.type) {\r\n            case \"result\": {\r\n                showMoreFlag = true;\r\n                searchResults = message.value;\r\n                break;\r\n            }\r\n            case \"partial-result\": {\r\n                showMoreFlag = true;\r\n                // append\r\n                searchResults = searchResults.concat(message.value);\r\n                // remove duplicates\r\n                searchResults = searchResults.filter((value, index, self) => index === self.findIndex((t) => (t.name === value.name)));\r\n                break;\r\n            }\r\n            case \"half-result\": {\r\n                showMoreFlag = true;\r\n                // append\r\n                console.log(\"more\", message.value);\r\n                searchResults = searchResults.concat(message.value);\r\n                // remove duplicates\r\n                searchResults = searchResults.filter((value, index, self) => index === self.findIndex((t) => (t.name === value.name)));\r\n                break;\r\n            }\r\n            case \"results-exhausted\": {\r\n                showMoreFlag = false;\r\n                // clearInterval(autoSearch)\r\n                break;\r\n            }\r\n        }\r\n    }));\r\n    // this is used to send message to provider\r\n    // tsvscode.postMessage({ type: \"get-token\", value: undefined });\r\n    // searchAll(\"data\")\r\n}));\r\nfunction clearResults() {\r\n    searchResults = [];\r\n}\r\nfunction post(message) {\r\n    tsvscode.postMessage(message);\r\n}\r\nfunction search(type, query) {\r\n    post({\r\n        type: \"search-\" + type,\r\n        value: query\r\n    });\r\n}\r\nfunction searchData(query) {\r\n    search(\"data\", query);\r\n}\r\nfunction searchProcess(query) {\r\n    search(\"process\", query);\r\n}\r\nfunction searchContainer(query) {\r\n    search(\"container\", query);\r\n}\r\nfunction searchAll(type) {\r\n    post({\r\n        type: \"search-all\",\r\n        value: {\r\n            type,\r\n            query: \"*\"\r\n        }\r\n    });\r\n}\r\nfunction searchSymbol(query) {\r\n    if (searchType === \"data\")\r\n        searchData(query);\r\n    else if (searchType === \"process\")\r\n        searchProcess(query);\r\n    else\r\n        searchContainer(query);\r\n}\r\nfunction open(query) {\r\n    post({ type: \"open\", value: query });\r\n}\r\nfunction showMore() {\r\n    post({ type: \"show-more\", value: \"\" });\r\n}\r\nfunction color(kind) {\r\n    switch (kind) {\r\n        case \"Interface\":\r\n            return \"yellow\";\r\n        case \"Class\":\r\n            return \"aqua\";\r\n        case \"Struct\":\r\n            return \"orange\";\r\n        case \"Function\":\r\n            return \"green\";\r\n        case \"Namespace\":\r\n        case \"Module\":\r\n        case \"Package\":\r\n            return \"orange\";\r\n        default:\r\n            return \"white\";\r\n    }\r\n}\r\n</script>\r\n\r\n<div class=\"main\">\r\n<!-- <pre>\r\n    {JSON.stringify({searchQuery, searchType}, null, 2)}\r\n</pre> -->\r\n<span>\r\n    {searchResults.length}\r\n</span>\r\n<div class=\"form\">\r\n<input bind:value={searchQuery} on:input={() => {\r\n    if (searchQuery === \"*\")\r\n        searchAll(searchType)\r\n    else \r\n        searchSymbol(searchQuery)\r\n}} class=\"query-input\" placeholder=\"Filter by typing name\"/>\r\n\r\n<div class=\"types\">\r\n{#each TypeOptions as option}\r\n    <div class=\"type\">\r\n        <input type=\"radio\" id={option.value} value={option.value} \r\n            on:change={() => {\r\n                clearResults()\r\n                searchAll(option.value)\r\n            }}\r\n            bind:group={searchType} class=\"input-type\"/>\r\n        <label for={option.value}>{option.label}</label>\r\n    </div>\r\n{/each}\r\n\r\n</div>\r\n{#if showMoreFlag}\r\n    <button bind:this={showMoreButton} on:click={showMore}>Show More</button>\r\n{/if}\r\n</div>\r\n\r\n<ul on:scroll={(e) => showMore()} class=\"browse\">\r\n\t{#each searchResults as classType}\r\n\t\t<li style={`color: ${color(classType?.kind.toString())};`} on:scroll={() => console.log(\"list scrolling\")} \r\n                on:select={() => console.log(\"select\")}>\r\n            <button class=\"symbol\" \r\n                title={classType?.kind.toString() + \" \" + classType?.name}\r\n                on:click={() => {\r\n                post({\r\n                    type: \"open\",\r\n                    value: {\r\n                        path: classType?.location?.uri?.path,\r\n                        position: classType?.location?.range[0]\r\n                    }\r\n                })\r\n            }}>\r\n                <span class=\"class\">{classType.name}</span>\r\n                <span class=\"container\">{classType?.containerName || \"\"}</span>\r\n            </button>\r\n        </li>\r\n\t{/each}\r\n</ul>\r\n</div>\r\n\r\n<style>\r\n    ul {\r\n        list-style-type: square;\r\n        list-style-position: inside;\r\n    }\r\n    .symbol {\r\n        text-align: left;\r\n        background-color: transparent;\r\n        font-size: 1rem;\r\n        width: max-content;\r\n    }\r\n    .symbol:hover {\r\n        background-color: rgb(59, 125, 168);\r\n    }\r\n    .class {\r\n        text-align: left;\r\n        height: 300px;\r\n        overflow-y: scroll;\r\n    }\r\n    .main {\r\n        position: absolute;\r\n        overflow-y: scroll;\r\n    }\r\n    .form {\r\n        height: 15vh;\r\n    }\r\n    .browse {\r\n        /* background-color: red; */\r\n        overflow: scroll; \r\n        height: 85vh;\r\n    }\r\n    /* .container {\r\n        text-align: right;\r\n        color: gray;\r\n        text-overflow: ellipsis;\r\n    } */\r\n    .types {\r\n        margin: 0.5rem;\r\n    }\r\n    .type {\r\n        display: flex;\r\n        flex-direction: row;\r\n        justify-content: flex-start;\r\n        margin: 0.5rem;\r\n        cursor: pointer;\r\n    }\r\n    .type input {\r\n        width: 30px;\r\n        outline: none;\r\n    }\r\n</style>"
  ],
  "names": [],
  "mappings": "AA+LI,EAAE,0BAAC,CAAC,AACA,eAAe,CAAE,MAAM,CACvB,mBAAmB,CAAE,MAAM,AAC/B,CAAC,AACD,OAAO,0BAAC,CAAC,AACL,UAAU,CAAE,IAAI,CAChB,gBAAgB,CAAE,WAAW,CAC7B,SAAS,CAAE,IAAI,CACf,KAAK,CAAE,WAAW,AACtB,CAAC,AACD,iCAAO,MAAM,AAAC,CAAC,AACX,gBAAgB,CAAE,IAAI,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,AACvC,CAAC,AACD,MAAM,0BAAC,CAAC,AACJ,UAAU,CAAE,IAAI,CAChB,MAAM,CAAE,KAAK,CACb,UAAU,CAAE,MAAM,AACtB,CAAC,AACD,KAAK,0BAAC,CAAC,AACH,QAAQ,CAAE,QAAQ,CAClB,UAAU,CAAE,MAAM,AACtB,CAAC,AACD,KAAK,0BAAC,CAAC,AACH,MAAM,CAAE,IAAI,AAChB,CAAC,AACD,OAAO,0BAAC,CAAC,AAEL,QAAQ,CAAE,MAAM,CAChB,MAAM,CAAE,IAAI,AAChB,CAAC,AAMD,MAAM,0BAAC,CAAC,AACJ,MAAM,CAAE,MAAM,AAClB,CAAC,AACD,KAAK,0BAAC,CAAC,AACH,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,GAAG,CACnB,eAAe,CAAE,UAAU,CAC3B,MAAM,CAAE,MAAM,CACd,MAAM,CAAE,OAAO,AACnB,CAAC,AACD,kBAAK,CAAC,KAAK,aAAC,CAAC,AACT,KAAK,CAAE,IAAI,CACX,OAAO,CAAE,IAAI,AACjB,CAAC"
}