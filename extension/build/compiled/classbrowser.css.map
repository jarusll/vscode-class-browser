{
  "version": 3,
  "file": "classbrowser.css",
  "sources": [
    "ClassBrowser.svelte"
  ],
  "sourcesContent": [
    "<script lang=\"ts\">let autoSearch;\nimport { onMount } from \"svelte\";\n;\nconst TypeOptions = [\n    {\n        value: \"data\",\n        label: \"Data (Class/Interface/Struct/Enum)\"\n    },\n    {\n        value: \"process\",\n        label: \"Process (Function)\"\n    },\n    {\n        value: \"container\",\n        label: \"Container (Namespace/Package/Module)\"\n    }\n];\nlet searchResults = [];\nlet searchType = \"data\";\nlet searchQuery = \"\";\nlet showMoreButton;\nlet showMoreFlag = true;\nonMount(async () => {\n    // this is used to recieve message from sidebar provider\n    window.addEventListener(\"message\", async (event) => {\n        const message = event.data;\n        switch (message.type) {\n            case \"result\": {\n                showMoreFlag = true;\n                searchResults = message.value;\n                break;\n            }\n            case \"partial-result\": {\n                console.log(\"partial-result\", message.value);\n                showMoreFlag = true;\n                // append\n                searchResults = searchResults.concat(message.value);\n                // remove duplicates\n                searchResults = searchResults.filter((value, index, self) => index === self.findIndex((t) => (t.name === value.name)));\n                break;\n            }\n            case \"results-exhausted\": {\n                // showMoreFlag = false\n                console.log(\"exhausted\");\n                stopAutosearch();\n                break;\n            }\n        }\n    });\n    // this is used to send message to provider\n    // tsvscode.postMessage({ type: \"get-token\", value: undefined });\n    searchAll(\"data\");\n    startAutosearch();\n});\nfunction clearResults() {\n    searchResults = [];\n    stopAutosearch();\n    resetBackend();\n}\nfunction clearSearch() {\n    searchQuery = \"\";\n}\nfunction startAutosearch() {\n    autoSearch = setInterval(() => showMore(), 1000);\n}\nfunction stopAutosearch() {\n    clearInterval(autoSearch);\n}\nfunction resetBackend() {\n    post({\n        type: \"reset\",\n        value: \"\"\n    });\n}\nfunction post(message) {\n    tsvscode.postMessage(message);\n}\nfunction search(type, query) {\n    post({\n        type: \"search-\" + type,\n        value: query\n    });\n}\nfunction searchData(query) {\n    search(\"data\", query);\n}\nfunction searchProcess(query) {\n    search(\"process\", query);\n}\nfunction searchContainer(query) {\n    search(\"container\", query);\n}\nfunction searchAll(type) {\n    post({\n        type: \"search-all\",\n        value: {\n            type,\n            query: \"*\"\n        }\n    });\n}\nfunction searchSymbol(query) {\n    stopAutosearch();\n    clearResults();\n    if (searchType === \"data\")\n        searchData(query);\n    else if (searchType === \"process\")\n        searchProcess(query);\n    else\n        searchContainer(query);\n    startAutosearch();\n}\nfunction open(query) {\n    post({ type: \"open\", value: query });\n}\nfunction showMore() {\n    post({ type: \"show-more\", value: \"\" });\n}\nfunction color(kind) {\n    switch (kind) {\n        case \"Interface\":\n            return \"yellow\";\n        case \"Class\":\n            return \"aqua\";\n        case \"Struct\":\n            return \"orange\";\n        case \"Function\":\n            return \"green\";\n        case \"Namespace\":\n        case \"Module\":\n        case \"Package\":\n            return \"orange\";\n        default:\n            return \"white\";\n    }\n}\n</script>\n\n<div class=\"main\">\n<!-- <pre>\n    {JSON.stringify({searchQuery, searchType}, null, 2)}\n</pre> -->\n<span>\n    {searchResults.length}\n</span>\n<div class=\"form\">\n<input bind:value={searchQuery} on:input={() => {\n    if (searchQuery === \"\"){\n        clearResults()\n        searchAll(searchType)\n    }\n    else {\n        searchSymbol(searchQuery)\n    }\n}} class=\"query-input\" placeholder=\"Filter by typing name\"/>\n\n<div class=\"types\">\n{#each TypeOptions as option}\n    <div class=\"type\">\n        <input type=\"radio\" id={option.value} value={option.value} \n            name=\"types\"\n            on:change={() => {\n                clearResults()\n                clearSearch()\n                searchAll(option.value)\n                startAutosearch()\n            }}\n            bind:group={searchType} class=\"input-type\"/>\n        <label for={option.value}>{option.label}</label>\n    </div>\n{/each}\n\n</div>\n<!-- {#if showMoreFlag}\n    <button bind:this={showMoreButton} on:click={showMore}>Show More</button>\n{/if} -->\n</div>\n\n<ul class=\"browse\">\n\t{#each searchResults as classType}\n\t\t<li style={`color: ${color(classType?.kind.toString())};`} on:scroll={() => console.log(\"list scrolling\")} \n                on:select={() => console.log(\"select\")}>\n            <button class=\"symbol\" \n                title={classType?.kind.toString() + \" \" + classType?.name}\n                on:click={() => {\n                post({\n                    type: \"open\",\n                    value: {\n                        path: classType?.location?.uri?.path,\n                        position: classType?.location?.range[0]\n                    }\n                })\n            }}>\n                <span class=\"class\">{classType.name}</span>\n                <span class=\"container\">{classType?.containerName || \"\"}</span>\n            </button>\n        </li>\n\t{/each}\n</ul>\n</div>\n\n<style>\n    ul {\n        list-style-type: square;\n        list-style-position: inside;\n    }\n    .symbol {\n        text-align: left;\n        background-color: transparent;\n        font-size: 1rem;\n        width: max-content;\n    }\n    .symbol:hover {\n        background-color: rgb(59, 125, 168);\n    }\n    .class {\n        text-align: left;\n        height: 300px;\n        overflow-y: scroll;\n    }\n    .main {\n        position: absolute;\n        overflow-y: scroll;\n    }\n    .form {\n        height: 15vh;\n    }\n    .browse {\n        /* background-color: red; */\n        overflow: scroll; \n        height: 85vh;\n    }\n    /* .container {\n        text-align: right;\n        color: gray;\n        text-overflow: ellipsis;\n    } */\n    .types {\n        margin: 0.5rem;\n    }\n    .type {\n        display: flex;\n        flex-direction: row;\n        justify-content: flex-start;\n        margin: 0.5rem;\n        cursor: pointer;\n    }\n    .type input {\n        width: 30px;\n        outline: none;\n    }\n</style>"
  ],
  "names": [],
  "mappings": "AA0MI,EAAE,0BAAC,CAAC,AACA,eAAe,CAAE,MAAM,CACvB,mBAAmB,CAAE,MAAM,AAC/B,CAAC,AACD,OAAO,0BAAC,CAAC,AACL,UAAU,CAAE,IAAI,CAChB,gBAAgB,CAAE,WAAW,CAC7B,SAAS,CAAE,IAAI,CACf,KAAK,CAAE,WAAW,AACtB,CAAC,AACD,iCAAO,MAAM,AAAC,CAAC,AACX,gBAAgB,CAAE,IAAI,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,AACvC,CAAC,AACD,MAAM,0BAAC,CAAC,AACJ,UAAU,CAAE,IAAI,CAChB,MAAM,CAAE,KAAK,CACb,UAAU,CAAE,MAAM,AACtB,CAAC,AACD,KAAK,0BAAC,CAAC,AACH,QAAQ,CAAE,QAAQ,CAClB,UAAU,CAAE,MAAM,AACtB,CAAC,AACD,KAAK,0BAAC,CAAC,AACH,MAAM,CAAE,IAAI,AAChB,CAAC,AACD,OAAO,0BAAC,CAAC,AAEL,QAAQ,CAAE,MAAM,CAChB,MAAM,CAAE,IAAI,AAChB,CAAC,AAMD,MAAM,0BAAC,CAAC,AACJ,MAAM,CAAE,MAAM,AAClB,CAAC,AACD,KAAK,0BAAC,CAAC,AACH,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,GAAG,CACnB,eAAe,CAAE,UAAU,CAC3B,MAAM,CAAE,MAAM,CACd,MAAM,CAAE,OAAO,AACnB,CAAC,AACD,kBAAK,CAAC,KAAK,aAAC,CAAC,AACT,KAAK,CAAE,IAAI,CACX,OAAO,CAAE,IAAI,AACjB,CAAC"
}